<loading *ngIf="device == null" [model]="modelLoading"></loading>
<div *ngIf="device != null" class="container">
    <div class="row">
        <div class="col-lg input-group">
            <span class="input-group-addon">
                <i class="fa fa-info-circle"></i>
                ID
            </span>
            <input [(ngModel)]="device.id" id="id" type="text" class="form-control" name="ID" placeholder="ID" disabled>
        </div>

        <div class="col-lg input-group">
            <span class="input-group-addon">
                <i class="fa fa-commenting"></i>
                Dernier message
            </span>
            <input [(ngModel)]="device.lastCommunication" id="lastCommunication" type="text" class="form-control" name="derniere communication" placeholder="derniere communication"
                disabled>
        </div>
    </div>


    <div class="row">
        <div class="col-xl-10 input-group">
            <span class="input-group-addon">
                <i class="fa fa-tag"></i>
                Nom
            </span>
            <input [(ngModel)]="device.name" id="name" type="text" class="form-control" name="Nom" placeholder="Nom">
        </div>

        <div class="col-xl-2 zoneCheckBox">
            <span>
                <i class="fa fa-heart"></i>
                Favoris
            </span>
            <label class=" switch">
                <input type="checkbox" [checked]="device.isFavorite" (change)="favorite_changed($event.target.checked)">
                <span class="slider round"></span>
            </label>
        </div>
    </div>

    <div class="input-group">

        <span class="input-group-addon">
            <i class="fa fa-map-marker"></i>
            Site
        </span>
        <select class="form-control" id="site" (change)="site_changed($event.target.value)">
            <ng-container *ngFor="let site of sites" >
                <option [value]="site.id" [selected]="site.id == device.siteId">{{site.name}}</option>
            </ng-container>
        </select>

        <!--<i class="plusicon fa fa-plus-circle"></i>-->
    </div>

    <div class="input-group">

        <span class="input-group-addon">
            <i class="fa fa-home"></i>
            Zone
        </span>
        <select class="form-control" id="zone" (change)="zone_changed($event.target.value)">
            <ng-container *ngFor="let zone of zones">
                <option [value]="zone"[selected]="zone == device.zone">{{zone}}</option>
            </ng-container>
        </select>
    </div>

    <div class="btn-form-admin">
        <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#deleteSensorModal">
            <i class="fa fa-trash"></i> Supprimer ce site </button>
        <button type="button" class="btn btn-primary" (click)="send_device()">
            <i class="fa fa-floppy-o"></i> Enregistrer les modifications
        </button>

    </div>

</div>

<div class="modal fade" id="deleteSensorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Supprimer un capteur</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                Confirmer la suppression du capteur ?


            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="deleteDevice()">Supprimer</button>
            </div>
        </div>
    </div>
</div>